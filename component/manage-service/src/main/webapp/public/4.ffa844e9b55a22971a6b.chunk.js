webpackJsonp([4],{"9VFL":function(t,e,i){"use strict";var n=i("q58L"),s=i("2uxL"),o=i("iv8n"),r=i("c+Bi");i.d(e,"a",function(){return c});var a=this&&this.__decorate||function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},l=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=function(){function t(t,e){this.blackListWhiteListService=t,this.message=e,this.onDeleteTask=new n.EventEmitter}return t.prototype.ngOnInit=function(){this.getApis(),this.apiList=[],this.apis=[],this.api="",this.apiId="",this.msisdn="",this.ismsisdnError=!1,this.msisdnError="",this.long="",this.count="0",this.id=""},t.prototype.getBlackListNumbers=function(t){var e=this;this.blackListWhiteListService.getBlacklist(t,function(t){t.success?(e.blackListList=t.payload.Success.variables,null!=e.blackListList?e.count=e.blackListList.length:(e.blackListList=t.Success.variables,e.count=0)):e.message.error(t.message)})},t.prototype.getApis=function(){var t=this;this.blackListWhiteListService.getApiList(function(e){if(e.success)for(var i=0,n=e.payload;i<n.length;i++){var s=n[i],r=s.split(":",4),a=new o.b;a.id=r[3],a.name=r[1],a.version=r[2],a.provider=r[0],t.apis.push(a),t.apiList.push(r[1]+" - "+r[2]+" Provided by "+r[0]+" "+r[3])}else t.message.error(e.message)})},t.prototype.onApiSelected=function(){for(var t=0,e=this.apis;t<e.length;t++){var i=e[t];i.name==this.api.split("-")[0].trim()&&i.version==this.api.split("-")[1].split(" ")[1].trim()&&(this.id=i.id)}0!=this.id.length&&this.getBlackListNumbers(this.id)},t.prototype.addNewBlackListnumbers=function(){var t=this;if(0!=this.msisdnList.length){for(var e="",i="",n=0,s=this.apis;n<s.length;n++){var o=s[n];o.name==this.api.split("-")[0].trim()&&o.version==this.api.split("-")[1].split(" ")[1].trim()&&(e=o.id,i=o.name)}0!=e.length&&0!=i.length&&this.blackListWhiteListService.validationService(this.msisdnList,function(n,s){n.success?n.payload.valid.length?t.blackListWhiteListService.addNewToBlacklist(e,i,n.payload.valid,n.payload.validationRegex,n.payload.prefixGroup,n.payload.digitsGroup,function(i){i.success?(n.payload.invalid.length&&t.message.longError("Below Numbers does not match with defined Regex "+n.payload.invalid),t.message.success(i.message),t.getBlackListNumbers(e),t.msisdn=""):t.message.error(i.message)}):t.message.longError("Number does not match with defined Regex "+n.payload.invalid):t.message.error(n.message)})}},t.prototype.onUploadNumber=function(t){this.msisdnList=[];for(var e=!1,i=0,n=this.apiList;i<n.length;i++){var s=n[i];s==this.api&&(e=!0)}if(e)if(0!=this.api.length)if(this.isValid(this.msisdn)){this.ismsisdnError=!1;for(var o=this.msisdn.split(","),r=0,a=0,l=o;a<l.length;a++){var s=l[a];this.msisdnList[r]=s,r++}this.addNewBlackListnumbers()}else 0==this.msisdn.length?(this.msisdnError="Empty List",this.ismsisdnError=!0):(this.msisdnError="Wrong input please enter Comma separated valid mobile numbers ",this.ismsisdnError=!0);else this.msisdnError="Select an API first",this.ismsisdnError=!0;else this.msisdnError="Please Select Valid API",this.ismsisdnError=!0},t.prototype.onDeleteHandler=function(t,e){t&&this.getBlackListNumbers(e)},t.prototype.isValidMobileNumber=function(t){var e=/^((((tel:\+)(\\+){0,1})|((\+){1})|(\d))([0-9]+))$/;return!!new RegExp(e).test(t)},t.prototype.isValid=function(t){var e=/[^,]+/;return!!new RegExp(e).test(t)},a([i.i(n.Output)(),l("design:type","function"==typeof(e=void 0!==n.EventEmitter&&n.EventEmitter)&&e||Object)],t.prototype,"onDeleteTask",void 0),t=a([i.i(n.Component)({selector:"app-blacklist-main",template:i("pYqB"),styles:[i("sAc2")]}),l("design:paramtypes",["function"==typeof(c=void 0!==s.a&&s.a)&&c||Object,"function"==typeof(d=void 0!==r.a&&r.a)&&d||Object])],t);var e,c,d}()},H3bU:function(t,e,i){"use strict";var n=i("q58L"),s=i("2uxL"),o=i("c+Bi");i.d(e,"a",function(){return l});var r=this&&this.__decorate||function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},l=function(){function t(t,e){this.blackListWhiteListService=t,this.message=e,this.onDeleteTask=new n.EventEmitter}return t.prototype.ngOnInit=function(){this.datasource=[]},t.prototype.onDelete=function(t,e){var i=this;0!=t.length&&this.blackListWhiteListService.removeFromBlackList(t,e.toString(),function(t){t.success?(i.onDeleteTask.emit(!0),i.message.success(t.message)):i.message.error(t)})},r([i.i(n.Input)(),a("design:type",Array)],t.prototype,"datasource",void 0),r([i.i(n.Output)(),a("design:type","function"==typeof(e=void 0!==n.EventEmitter&&n.EventEmitter)&&e||Object)],t.prototype,"onDeleteTask",void 0),r([i.i(n.Input)(),a("design:type",Array)],t.prototype,"apiId",void 0),t=r([i.i(n.Component)({selector:"app-blacklist-list",template:i("oSRM"),styles:[i("sAc2")]}),a("design:paramtypes",["function"==typeof(l=void 0!==s.a&&s.a)&&l||Object,"function"==typeof(c=void 0!==o.a&&o.a)&&c||Object])],t);var e,l,c}()},Od5S:function(t,e){t.exports='<div class="animated fadeInUp row" style="animation-delay: 0.1s">\n    <div class="col-sm-12">\n        <div class="form-container quotaInputContainer">\n            <div class="tbl-header">\n                SPwise Blacklist\n                <br>\n            </div>\n            <div class="searchFilter">\n                <h4 class="control-label col-sm-2">Service Providers:</h4>\n                <div class="col-sm-4">\n                    <input type="text" class="form-control"\n                           [(ngModel)]="sp"\n                           [typeaheadMinLength]="0"\n                           container="body"\n                           [typeahead]="spList"\n                           typeaheadOptionField="spId"\n                           (typeaheadOnSelect)="onApiSelected($event)"\n                           placeholder="Select a Service provider"\n                    >\n                </div>\n                <div class="col-sm-4"><h4>BlackListed SP count : &nbsp; <span\n                        class="label label-info">{{ count }}</span>\n                </h4>\n                </div>\n\n            </div>\n\n            <form class="form-horizontal" #numberlistForm="ngForm" novalidate>\n                <br>\n                <div class="form-group">\n                    <label class="control-label col-sm-2">Selected service provider :</label>\n                    <div class="col-sm-6">\n                        <label class="slectedlabel control-label col-sm-3">No SP selected</label>\n                    </div>\n\n                </div>\n                <br><br>\n                <div class="form-group">\n                    <label class="control-label col-sm-2"></label>\n                <div class="col-sm-6">\n                    <button type="submit" class="btn btn-primary animated fadeIn">\n                        Add\n                    </button>\n                    <button type="submit" class="btn btn-warning animated fadeIn">\n                        Reset\n                    </button>\n                </div>\n                </div>\n            </form>\n\n        </div>\n    </div>\n</div>'},cIHB:function(t,e,i){e=t.exports=i("rP7Y")(!1),e.push([t.i,":host{display:block;margin-top:20px}.content-div,.quotaInputContainer{background-color:#fff}.quotaInputContainer{min-height:100px;padding:10px;border:1px solid #f5f5f5}.bs-callout-info{background-color:#e19131;border:1px solid #e3e3e3}.bs-callout{padding:20px;margin:20px 0;border:1px solid #eee;border-left-width:5px;border-radius:3px;overflow:hidden}.label-info{background-color:#5bc0de}.label{display:inline;padding:.2em .6em .3em;font-size:75%;font-weight:700;line-height:1;color:#fff;text-align:center;white-space:nowrap;vertical-align:baseline;border-radius:.25em}.table{width:70%!important;background-color:#f9f9f9}.searchFilter{color:#fff;min-height:78px;padding:19px;margin-bottom:20px;background-color:#e19131;border:1px solid #e3e3e3;border-radius:4px;box-shadow:inset 0 1px 1px rgba(0,0,0,.05)}.searchFilter div[class^=col-]{padding-bottom:10px}.control-label{text-align:right}.tbl-header{margin-top:10px;font-weight:600;font-size:1.3em;padding:5px 0 15px;color:#e19131;text-transform:uppercase}.slectedlabel{color:#9a9a9a}",""]),t.exports=t.exports.toString()},fyCw:function(t,e,i){"use strict";var n=i("9VFL"),s=i("hH1u"),o=i("vq1X"),r=i("ak/C");i.d(e,"a",function(){return l});var a=[{path:"apiwise",component:n.a,canActivate:[r.d],data:{permissions:"apiBlacklist"}},{path:"spwise",component:s.a,canActivate:[r.d],data:{permissions:"spBlackList"}}],l=o.a.forChild(a)},hH1u:function(t,e,i){"use strict";var n=i("q58L"),s=i("2uxL"),o=i("iv8n");i.d(e,"a",function(){return l});var r=this&&this.__decorate||function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},l=function(){function t(t){this.blackListService=t,this.onDeleteTask=new n.EventEmitter}return t.prototype.ngOnInit=function(){this.getApis(),this.submissionError="",this.apiList=[],this.applications=[],this.api="",this.apiId="",this.msisdn="",this.ismsisdnError=!1,this.islong=!1,this.msisdnError="",this.long="",this.isDublicate=!1,this.dublicate="",this.count="0"},t.prototype.getBlackListNumbers=function(t){},t.prototype.getApis=function(){var t=this;this.blackListService.getApiList(function(e,i){if(i){t.apiList=e;for(var n=0,s=0,r=t.apiList;s<r.length;s++){var a=r[s],l=a.split(":",4);t.applications[n]=new o.a,t.applications[n].id=l[3],t.applications[n].name=l[1],t.apiList[n]=l[1]+" - "+l[2]+" Provided by "+l[0]+" "+l[3],n+=1}}else t.submissionError=e,setTimeout(function(){t.submissionError=null},5e3)})},t.prototype.onApiSelected=function(t){var e=/\d+(?=\D*$)/,i=new RegExp(e);this.numberId=i.exec(this.api);for(var n="",s=0,o=0,r=this.applications;o<r.length;o++){var a=r[o];a.id==this.numberId[s]&&(n=a.id,s+=1)}0!=n.length&&this.getBlackListNumbers(n)},t.prototype.addNewBlackListnumbers=function(){var t=/\d+(?=\D*$)/,e=new RegExp(t);if(this.numberId=e.exec(this.api),0!=this.msisdnList.length){for(var i="",n="",s=0,o=0,r=this.applications;o<r.length;o++){var a=r[o];a.id==this.numberId[s]&&(i=a.id,n=a.id,s+=1)}var l=0;if(0!=i.length&&0!=n.length){if(this.isDublicate=!1,null!=this.blackListList)for(var c=0,d=this.blackListList.toString();c<d.length;c++){var a=d[c];this.blackListList.toString().includes(this.msisdnList[l])&&(this.dublicate="This MSISDN already exists",this.isDublicate=!0),l++}1==this.isDublicate&&(this.dublicate="This MSISDN already exists")}}},t.prototype.onUploadNumber=function(t){if(this.msisdnList=[],this.isValid(this.msisdn)){this.ismsisdnError=!1;for(var e=this.msisdn.split(","),i=0,n=0,s=e;n<s.length;n++){var o=s[n];this.isValidMobileNumber(o)?(this.msisdnList[i]="tel3A+"+Number(o),this.islong=!1):this.islong=!0,i++}1==this.islong?(this.long="Not a Valid MSISDN",this.islong=!0):this.addNewBlackListnumbers()}else 0==this.msisdn.length?(this.msisdnError="Empty List",this.ismsisdnError=!0):(this.msisdnError="Wrong input please enter Comma seperated valid mobile numbers ",this.ismsisdnError=!0)},t.prototype.onDeleteHandler=function(t,e){t&&this.getBlackListNumbers(e)},t.prototype.isValidMobileNumber=function(t){var e=/^\d{11}$/;return!!new RegExp(e).test(t)},t.prototype.isValid=function(t){var e=/^\d+(,\d+)*$/;return!!new RegExp(e).test(t)},r([i.i(n.Output)(),a("design:type","function"==typeof(e=void 0!==n.EventEmitter&&n.EventEmitter)&&e||Object)],t.prototype,"onDeleteTask",void 0),t=r([i.i(n.Component)({selector:"app-spblacklist-main",template:i("Od5S"),styles:[i("cIHB")]}),a("design:paramtypes",["function"==typeof(l=void 0!==s.a&&s.a)&&l||Object])],t);var e,l}()},o64E:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("q58L"),s=i("fyCw"),o=i("9VFL"),r=i("hH1u"),a=i("Ye0x"),l=i("SbQH"),c=i("WYiA"),d=i("T2Au"),p=i("H3bU");i.d(e,"BlackListModule",function(){return f});var b=this&&this.__decorate||function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},h=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},f=function(){function t(){}return t=b([i.i(n.NgModule)({imports:[a.a,s.a,l.a,l.b,d.a,c.a.forRoot()],declarations:[o.a,p.a,r.a]}),h("design:paramtypes",[])],t)}()},oSRM:function(t,e){t.exports='<div class="section">\n    <div class="container">\n        <div class="row">\n            <div class="col-md-6 col-md-offset-1">\n                <div class="tbl-header">\n                    <label class="subtitle">Subscriber list</label>\n                </div>\n                <div class="scrollit">\n                    <div class="table">\n\n                        <div class="tbl-row header">\n                            <div class="tbl-cell">MSISDN</div>\n                            <div class="tbl-cell text-right pad-r-15-im">Action</div>\n                        </div>\n\n                        <ng-container *ngFor="let item of datasource">\n                            <div class="tbl-row">\n                                <div class="tbl-cell">{{item.replace(\'tel3A+\',\'\')}}</div>\n                                <div class="tbl-cell text-right">\n                                    <button class="btn btn-danger"\n                                            (click)="onDelete(item, apiId.toString())"><i\n                                            class="material-icons">delete</i></button>\n                                </div>\n                            </div>\n                        </ng-container>\n\n                        <div class="no-rec-row tbl-row" *ngIf="datasource == null">\n                            <span class="no-rec">No Records..</span>\n                        </div>\n                        <br><br><br>\n                    </div>\n                </div> \x3c!--TABLE END--\x3e\n\n            </div>\n        </div>\n    </div>\n</div>'},pYqB:function(t,e){t.exports='<div class="animated fadeInUp row" style="animation-delay: 0.1s">\n    <div class="col-sm-12">\n        <div class="form-container quotaInputContainer">\n            <div class="tbl-header">\n                APIwise Blacklist\n                <br>\n            </div>\n            <div class="searchFilter">\n                <h4 class="control-label col-sm-1">API :</h4>\n                <div class="col-sm-4">\n                    <input type="text" class="form-control"\n                           [(ngModel)]="api"\n                           [typeaheadMinLength]="0"\n                           container="body"\n                           [typeahead]="apiList"\n                           (typeaheadOnSelect)="onApiSelected()"\n                           placeholder="Select the API"\n                    >\n                </div>\n                <div class="col-sm-4"><h4>BlackListed subscribers count : &nbsp; <span\n                        class="label label-info">{{ count }}</span>\n                </h4>\n                </div>\n\n            </div>\n\n            <br><br>\n            <form class="form-horizontal" #numberlistForm="ngForm" novalidate\n                  (ngSubmit)="onUploadNumber(numberlistForm)">\n\n\n                <div class="form-group" [ngClass]="{\'has-danger\': (ismsisdnError)}">\n                    <label class="control-label col-sm-2">Number:</label>\n                    <div class="col-sm-6">\n                        <input class="form-control"\n                               autocomplete="off"\n                               #nameRef="ngModel"\n                               required="required"\n                               [(ngModel)]="msisdn"\n                               type="text"\n                               name="manualNumber"\n                               placeholder="e.g.94777333100,94777333105 (Comma seperated entries)">&nbsp;\n                        <span class="error" *ngIf="ismsisdnError">{{msisdnError}}</span>\n                    </div>\n                    <button class="btn btn-primary">\n                        <span class="glyphicon glyphicon-plus-sign"> ADD</span>\n                    </button>\n                </div>\n\n\n            </form>\n\n\n            <br><br>\n\n            <app-blacklist-list\n                    [datasource]="blackListList" [apiId]="id" (onDeleteTask)="onDeleteHandler($event, id)">\n            </app-blacklist-list>\n\n\n        </div>\n    </div>\n</div>'},sAc2:function(t,e,i){e=t.exports=i("rP7Y")(!1),e.push([t.i,":host{display:block;margin-top:20px}.content-div,.quotaInputContainer{background-color:#fff}.quotaInputContainer{min-height:100px;padding:10px;border:1px solid #f5f5f5}.bs-callout-info{background-color:#e19131;border:1px solid #e3e3e3}.bs-callout{padding:20px;margin:20px 0;border:1px solid #eee;border-left-width:5px;border-radius:3px;overflow:hidden}.label-info{background-color:#5bc0de}.label{display:inline;padding:.2em .6em .3em;font-size:75%;font-weight:700;line-height:1;color:#fff;text-align:center;white-space:nowrap;vertical-align:baseline;border-radius:.25em}.searchFilter{min-height:78px;padding:19px;margin-bottom:20px;background-color:#e19131;border:1px solid #e3e3e3;border-radius:4px;box-shadow:inset 0 1px 1px rgba(0,0,0,.05);color:#fff}.searchFilter div[class^=col-]{padding-bottom:10px}.tbl-header{margin-top:10px;font-weight:600;font-size:1.3em;padding:5px 0 15px;color:#e19131;text-transform:uppercase}.error{font-size:.9em;color:#f96565}.has-danger .form-control{border-color:#d9534f;color:#d9534f}.table{display:table;width:100%}.table .tbl-row{display:table-row;background-color:#f6f6f6;height:0;transition:all .5s ease-in}.table .tbl-row:nth-of-type(odd){background-color:#fff}.table .tbl-row.header{background-color:#78a;font-weight:600;color:#fff}.table .tbl-row .tbl-cell{display:table-cell;padding:10px 10px}.table .tbl-row.modified{background-color:#ffc}.table .tbl-row.open{height:158px;background-color:#f4f2c9}.table .tbl-row.open .action{border-color:#000;color:#000}.table .tbl-row.open.A,.table .tbl-row.open.R{height:243px}.table .tbl-row .more-con{padding:10px 0 10px 0;background-color:#f8f9fa;position:absolute;left:10px;right:11px;height:105px;margin-top:53px;border:1px solid #d0d0d0;-ms-box-shadow:inset 0 10px 10px -9px #d1d1d1;box-shadow:inset 0 10px 10px -9px #d1d1d1}.table .tbl-row .more-con.A,.table .tbl-row .more-con.R{height:190px}.table .tbl-row .more-con .more-row{margin-bottom:2px}.table .tbl-row .more-con .field-name{height:40px;background-color:#f1f3f5;line-height:40px;text-align:right;font-weight:600}.table .tbl-row .more-con .field-value{height:40px;background-color:#fff;line-height:40px}.table .tbl-row .more-con input,.table .tbl-row .more-con select{margin-top:2px}.table .tbl-row .more-con .btn{margin-top:10px;padding-top:5px!important;padding-bottom:5px!important}.table .no-rec-row{position:relative}.table .no-rec-row .no-rec{position:absolute;left:0;right:0;margin:auto;width:100px;padding-top:15px;color:#8a98a0}.table .fromcolor{color:#107124}.table .tocolor{color:#bb3535}h3{text-transform:uppercase}.subtitle{color:#e19132}.scrollit{overflow-y:auto;height:300px}",""]),t.exports=t.exports.toString()}});